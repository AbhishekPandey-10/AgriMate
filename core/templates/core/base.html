{% load pwa %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agri-Ledger</title>

    {% progressive_web_app_meta %}

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#166534', // Green-800
                        secondary: '#ca8a04', // Yellow-600
                        background: '#f0fdf4', // Green-50
                        surface: '#ffffff',
                    }
                }
            }
        }
    </script>

    <script src="https://unpkg.com/lucide@latest"></script>
</head>

<body class="bg-background min-h-screen font-sans text-gray-900">

    {% if messages %}
    <div class="fixed top-4 right-4 z-50 space-y-2" id="toast-container">
        {% for message in messages %}
        <div class="toast-msg flex items-center gap-3 px-5 py-3 rounded-xl shadow-lg border backdrop-blur-md text-sm font-medium animate-slide-in
            {% if message.tags == 'success' %}bg-green-50 border-green-200 text-green-800
            {% elif message.tags == 'error' %}bg-red-50 border-red-200 text-red-800
            {% elif message.tags == 'warning' %}bg-yellow-50 border-yellow-200 text-yellow-800
            {% else %}bg-blue-50 border-blue-200 text-blue-800{% endif %}">
            {% if message.tags == 'success' %}<i data-lucide="check-circle"
                class="h-5 w-5 text-green-600 flex-shrink-0"></i>
            {% elif message.tags == 'error' %}<i data-lucide="alert-circle"
                class="h-5 w-5 text-red-600 flex-shrink-0"></i>
            {% elif message.tags == 'warning' %}<i data-lucide="alert-triangle"
                class="h-5 w-5 text-yellow-600 flex-shrink-0"></i>
            {% else %}<i data-lucide="info" class="h-5 w-5 text-blue-600 flex-shrink-0"></i>{% endif %}
            <span>{{ message }}</span>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    {% block content %}
    {% endblock %}

    <script>
        lucide.createIcons();

        // Auto-dismiss toasts after 4 seconds
        document.querySelectorAll('.toast-msg').forEach((toast, i) => {
            setTimeout(() => {
                toast.style.transition = 'opacity 0.4s, transform 0.4s';
                toast.style.opacity = '0';
                toast.style.transform = 'translateX(100%)';
                setTimeout(() => toast.remove(), 400);
            }, 4000 + i * 500);
        });
    </script>

    <style>
        .animate-slide-in {
            animation: slideIn 0.35s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(100%);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
    </style>
</body>

</html>